<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Access</title>
    <link rel="stylesheet" href="styles.css">
    <script src="scripts.js" defer></script>
</head>
<body>
    <div class="course-container">
        <div id="course-content">
            <!-- Content loaded dynamically -->
        </div>

        <script>
document.addEventListener('DOMContentLoaded', function() {
    // Debug: Log that the script is running
    console.log("Script loaded - checking URL parameters");
    
    const urlParams = new URLSearchParams(window.location.search);
    const courseId = urlParams.get('id');
    const token = urlParams.get('token');
    
    // Debug: Log the extracted parameters
    console.log("Course ID:", courseId);
    console.log("Token:", token);
    
    // Check if required parameters exist
    if (!courseId) {
        console.error("No course ID found in URL");
        showAccessDenied();
        return;
    }
    
    // Debug: Log before loading course
    console.log("Attempting to load course:", courseId);
    
    loadCourse(courseId);
});

function showAccessDenied() {
    console.log("Showing access denied message");
    document.getElementById('invalid-access').classList.remove('hidden');
    document.getElementById('course-content').classList.add('hidden');
}

function loadCourse(courseId) {
    // Debug: Log course loading attempt
    console.log("Loading course content for:", courseId);
    
    const courses = {
        'crs1': {
            title: "Introduction Course",
            content: `
                <h2>Welcome to Course 1</h2>
                <p>This is exclusive content available only through your special link.</p>
                <section>
                    <h3>Lesson 1: Getting Started</h3>
                    <p>You should see this content if everything is working properly.</p>
                    <p>If you see this, your link is working correctly!</p>
                </section>
            `
        },
        'crs2': {
            title: "Advanced Techniques",
            content: `
                <h2>Advanced Course Content</h2>
                <p>Specialized knowledge shared only with select students.</p>
                <section>
                    <h3>Advanced Topic 1</h3>
                    <p>This confirms your advanced course is loading properly.</p>
                </section>
            `
        }
    };
    
    // Debug: Log available courses
    console.log("Available courses:", Object.keys(courses));
    
    if (courses[courseId]) {
        console.log("Course found - displaying content");
        document.title = courses[courseId].title + " | Private Learning";
        document.getElementById('course-content').innerHTML = `
            <h1>${courses[courseId].title}</h1>
            ${courses[courseId].content}
            <div class="course-footer">
                <p>Bookmark this page to retain access.</p>
            </div>
        `;
    } else {
        console.error("Course not found:", courseId);
        showAccessDenied();
    }
    
    // Debug: Log final state
    console.log("Course load attempt complete");
}
        </script>
</body>
</html>
